(function(){tinymce.create('tinymce.plugins.ButnsPlugin',{init:function(ed,url){ed.addCommand('mceButns',function(){var sel=ed.selection;if(sel.isCollapsed()&&!ed.dom.getParent(sel.getNode(),"A")){return}ed.windowManager.open({file:url+'/link.html',width:500+ed.getLang('butnsbutton.delta_width',0),height:275+ed.getLang('butnsbutton.delta_height',0),inline:1},{plugin_url:url,})});ed.addButton('butnsbutton',{title:'Add Butns link',cmd:'mceButns',image:url+'/img/20x20_butns_logo.gif'});ed.onNodeChange.add(function(ed,cm,n,e){cm.setDisabled("butnsbutton",e&&n.nodeName!="A");cm.setActive("butnsbutton",n.nodeName=="A"&&!n.name)})},createControl:function(n,cm){return null},getInfo:function(){return{longname:'Butns plugin',author:'Wouter Boomsma',authorurl:'http://www.butns.com',infourl:'http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/butns',version:"0.2"}}});tinymce.PluginManager.add('butnsbutton',tinymce.plugins.ButnsPlugin)})();